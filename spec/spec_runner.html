<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
      "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
   <title>Jasmine Spec Runner</title>

   <script type="text/javascript">
      (function() {

         // BEGIN: Inserted for specific module

         // List the tests you want to execute relative to this file combined with the baseUrl configured for
         // require js below.
         window.tests = [ 'spec/event_bus_spec' ];

         // Configure require js for this specific module. It is recommended to place this file within a sub
         // folder called 'spec' within the module. Hence the baseUrl should point one folder up to the
         // main folder of this module (most probably '../').
         // Optionally it is necessary to configure the paths to all modules required by the module under test.
         window.require = {
            baseUrl: '../',
            paths: {
               underscore: '../underscore/underscore'
            },
            shim: {
               underscore: {
                  exports: function() {
                     return this._.noConflict();
                  }
               }
            }
         };

         // END: Inserted for specific module


         var prefix = String( location.href ).split( '/includes/' )[ 0 ];

         document.writeln( '<link rel="stylesheet" type="text/css" href="' + prefix + '/tools/source/jasmine/jasmine.css">' );

         [ '/tools/source/jasmine/jasmine.js', '/tools/source/jasmine/jasmine-html.js', '/includes/lib/requirejs/require.js' ]
         .forEach( function( file ) {
            document.writeln( '<script type="text/javascript" src="' + prefix + file + '"><' + '/script>' );
         } );

      })();
   </script>

   <script type="text/javascript">
      (function() {

         var jasmineEnv = jasmine.getEnv();
         jasmineEnv.updateInterval = 1000;

         var htmlReporter = new jasmine.HtmlReporter();

         jasmineEnv.addReporter( htmlReporter );

         jasmineEnv.specFilter = function( spec ) {
            return htmlReporter.specFilter( spec );
         };

         var currentWindowOnload = window.onload;

         window.onload = function() {
            if( currentWindowOnload ) {
               currentWindowOnload();
            }

            require( window.tests, function() {
               execJasmine();
            } );

            window.onfocus = function() {
               // reload the page when the browser window gets the focus
               window.location.reload();
            }
         };

         function execJasmine() {
            jasmineEnv.execute();
         }

      })();
   </script>

</head>

<body>
</body>
</html>
